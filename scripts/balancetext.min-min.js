"use strict";!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof module&&module.exports?module.exports=t():e.balanceText=t()}(this,(function(){var e,t,n,i={sel:[],el:[]},o=!1,a=!1;function r(){}function l(e,t){Array.prototype.forEach.call(e,t)}function d(){this.reset()}function s(e){return t.some((function(t){return t.start<e&&e<t.end}))}function u(e,i){if(e.nodeType===e.ELEMENT_NODE)if("nowrap"===window.getComputedStyle(e).whiteSpace){var o=e.outerHTML.length;t.push({start:n,end:n+o}),n+=o}else l(e.childNodes,(function(e){u(e,!0)})),i&&(n+=e.outerHTML.length-e.innerHTML.length);else e.nodeType===e.COMMENT_NODE?n+=e.length+7:e.nodeType===e.PROCESSING_INSTRUCTION_NODE?n+=e.length+2:n+=e.length}function c(e,i,o){if(0===o)e.style.whiteSpace=i,n=0,t=[],u(e,!1),e.style.whiteSpace="nowrap";else{var a=[];t.forEach((function(e){e.start>o&&a.push({start:e.start-o,end:e.end-o})})),t=a}}d.prototype.reset=function(){this.index=0,this.width=0};var f;function p(e,t,n){var i,o,a,r,l;return r=(t=t.trim()).split(" ").length,t+=" ",r<2?t:((a=document.createElement("span")).innerHTML=t,e.appendChild(a),o=a.offsetWidth,a.parentNode.removeChild(a),l=Math.floor((n-o)/(r-1)),a.style.wordSpacing=l+"px",a.setAttribute("data-owner","balance-text-justify"),(i=document.createElement("div")).appendChild(a),i.innerHTML)}function h(t,n){var i,o=/([^\S\u00a0]|-|\u2014|\u2013|\u00ad)(?![^<]*>)/g;if(!e)for(e=[],i=o.exec(t);null!==i;)s(i.index)||e.push(i.index),i=o.exec(t);return-1!==e.indexOf(n)}function y(e,t){return 0===t||t===e.length||h(e,t-1)&&!h(e,t)}function w(e,t,n,i,o,a,r){var l;if(t&&"string"==typeof t)for(;;){for(;!y(t,a);)a+=o;if(e.innerHTML=t.substr(0,a),l=e.offsetWidth,o<0){if(l<=i||l<=0||0===a)break}else if(i<=l||n<=l||a===t.length)break;a+=o}r.index=a,r.width=l}function m(e){return e?"string"==typeof e?document.querySelectorAll(e):e.tagName&&e.querySelectorAll?[e]:e:[]}function g(t){l(m(t),(function(t){!function(e){var t=e.querySelectorAll('br[data-owner="balance-text-hyphen"]');l(t,(function(e){e.outerHTML=""})),l(t=e.querySelectorAll('br[data-owner="balance-text"]'),(function(e){e.outerHTML=" "}));var n=e.querySelectorAll('span[data-owner="balance-text-softhyphen"]');if(n.length>0&&l(n,(function(e){var t=document.createTextNode("Â­");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)})),(n=e.querySelectorAll('span[data-owner="balance-text-justify"]')).length>0){var i="";l(n,(function(e){i+=e.textContent,e.parentNode.removeChild(e)})),e.innerHTML=i}}(t);var n=t.style.whiteSpace,i=t.style.float,o=t.style.display,a=t.style.position,r=t.style.lineHeight;t.style.lineHeight="normal";var s=t.offsetWidth,u=t.offsetHeight;t.style.whiteSpace="nowrap",t.style.float="none",t.style.display="inline",t.style.position="static";var f=t.offsetWidth,h=t.offsetHeight,y="pre-wrap"===n?0:function(e,t){var n,i,o=document.createElement("div");return o.style.display="block",o.style.position="absolute",o.style.bottom=0,o.style.right=0,o.style.width=0,o.style.height=0,o.style.margin=0,o.style.padding=0,o.style.visibility="hidden",o.style.overflow="hidden",(i=document.createElement("span")).style.fontSize="2000px",i.innerHTML="&nbsp;",o.appendChild(i),e.appendChild(o),n=i.getBoundingClientRect(),o.parentNode.removeChild(o),t/(n.height/n.width)}(t,h);if(s>0&&f>s&&f<5e3){for(var m,g,x,v,b,T=t.innerHTML,M="",S="",E=function(e){return"justify"===(e.currentStyle||window.getComputedStyle(e,null)).textAlign}(t),L=Math.round(u/h),H=0;L>1;)e=null,c(t,n,H),w(t,T,s,m=Math.round((f+y)/L-y),-1,Math.round((T.length+1)/L)-1,g=new d),x=new d,w(t,T,s,m,1,g.index,x),g.reset(),w(t,T,s,m,-1,x.index,g),v=0===g.index?x.index:s<x.width||g.index===x.index||Math.abs(m-g.width)<Math.abs(x.width-m)?g.index:x.index,S=T.substr(0,v).replace(/\s$/,""),(b=Boolean(S.match(/\u00ad$/)))&&(S=S.replace(/\u00ad$/,'<span data-owner="balance-text-softhyphen">-</span>')),E?M+=p(t,S,s):(M+=S,M+=b||Boolean(S.match(/(-|\u2014|\u2013)$/))?'<br data-owner="balance-text-hyphen" />':'<br data-owner="balance-text" />'),T=T.substr(v),H=v,L--,t.innerHTML=T,f=t.offsetWidth;t.innerHTML=E?M+p(t,T,s):M+T}t.style.whiteSpace=n,t.style.float=i,t.style.display=o,t.style.position=a,t.style.lineHeight=r}))}function x(){var e=m(i.sel.join(","));g(Array.prototype.concat.apply(i.el,e))}function v(){var e,t,n,i,a;o||(e=x,"loading"!==document.readyState?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",(function(){"loading"!==document.readyState&&e()})),window.addEventListener("load",x),window.addEventListener("resize",(t=x,function(){var e=this,o=arguments;function r(){i||t.apply(e,o),a=null}a?clearTimeout(a):i&&t.apply(e,o),a=setTimeout(r,n||100)})),o=!0)}function b(e,t){e?t&&!0===t.watch?function(e){"string"==typeof e?i.sel.push(e):l(m(e),(function(e){i.el.push(e)})),v(),x()}(e):t&&!1===t.watch?function(e){"string"==typeof e?i.sel=i.sel.filter((function(t){return t!==e})):(e=m(e),i.el=i.el.filter((function(t){return-1===e.indexOf(t)})))}(e):g(e):a||(i.sel.push(".balance-text"),v(),a=!0)}return b.updateWatched=x,(f=document.documentElement.style).textWrap||f.WebkitTextWrap||f.MozTextWrap||f.MsTextWrap?(r.updateWatched=r,r):b}));