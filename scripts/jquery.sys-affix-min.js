!function($){$.fn.sysAffix=function(o){var t=$(this);function s(t){t.data("sys-affix.locked")||t.data("sys-affix.locked",!0).css({left:t.offset().left+"px","margin-top":0,position:"fixed",top:o.lockedTop}).addClass(o.lockedClass)}function a(t){t.data("sys-affix.locked")&&t.data("sys-affix.locked",!1).css({left:"","margin-top":"",position:"absolute",top:"",bottom:""}).removeClass(o.lockedClass)}(o=$.extend({lockedTop:0,lockedBottom:0,lockedClass:"sys-affix-locked",container:t.offsetParent(),scrollParent:window},o||{})).container=$(o.container),o.scrollParent=$(o.scrollParent),t.addClass("sys-affix").css("position","absolute").each((function(){$(this).data("sys-affix.top",$(this).offset().top)}));var e=0,i=1;return o.scrollParent.on("scroll",(function(){var c=$(this),f=Math.max(0,Math.min($(document).height()-c.height(),c.scrollTop())),l=f+c.height(),n=o.container&&o.container.offset()?o.container.offset().top:0,d=n+o.container.height(),r=f>e?1:f<e?-1:0;0!=r&&(t.each((function(){var t=$(this),e=n+parseInt(t.css("margin-top")),h=e+t.height()+o.lockedBottom;if(!(t.height()>o.container.height())){var p=c.height()<=t.height();i>0&&r<0&&p?t.data("sys-affix.locked")&&(a(t),t.css("margin-top",l-t.height()-o.lockedBottom-n+"px")):i<0&&r>0&&p?t.data("sys-affix.locked")&&(a(t),t.css("margin-top",f-n+o.lockedTop+"px")):r>0&&l>=h&&l<d&&p?t.data("sys-affix.locked")||function(t){t.data("sys-affix.locked")||t.data("sys-affix.locked",!0).css({left:t.offset().left+"px","margin-top":0,position:"fixed",bottom:o.lockedBottom}).addClass(o.lockedClass)}(t):r<0&&f<=e-o.lockedTop&&f>n||!p&&f+o.lockedTop>e&&f+o.lockedTop+t.height()<d?t.data("sys-affix.locked")||s(t):r<0&&f<=n-o.lockedTop?t.data("sys-affix.locked")&&a(t):r>0&&l>=d+o.lockedBottom&&t.data("sys-affix.locked")&&(a(t),t.css("margin-top",o.container.height()-t.height()+"px"))}})),e=f,i=r)})).trigger("scroll"),t}}(jQuery);